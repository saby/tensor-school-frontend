## Модули, import/export

Модуль — это переиспользуемая часть кода, содержащая в себе детали реализации и предоставляющая открытое API, что позволяет легко загрузить её и использовать в другом коде.

По мере роста приложения, возникает необходимость разбивать программу на блоки, структура и поведение которых подчиняются определённым правилам, называемые модулями. Это делает дальнейшую разработку и поддержку проще.



В языке JavaScript существует встроенная поддержка модулей.

Чтобы указать браузеру, что подключаемый на страницу скрипт - это модуль, нужно тегу скрипт установить атрибут type="module".

```html
    <script src="./myModule.js" type="module"></script>
```

Браузер автоматически загрузит и запустит импортированный модуль (и те, которые он импортирует, если надо), а затем запустит скрипт.

Модули могут загружать друг друга и использовать директивы export и import, чтобы обмениваться функциональностью, вызывать функции одного модуля из другого:

* export отмечает переменные и функции, которые должны быть доступны вне текущего модуля.
* import позволяет импортировать функциональность из других модулей.

Базовый синтаксис экспорта:

```javascript
    // экспорт по умолчанию
    export default class MyClass {}
    // именованный экспорт
    export function increment() {}
    // реэкспорт
    export MyClass, {default as Class} from './myModule.js';
```


Базовый синтаксис импорта:

```javascript
    // импорт экспорта по умолчанию
    import MyClass from './myModule.js';
    import {default as Class} from './myModule.js';
    // импорт именованного экспорта
    import {increment} from './myModule.js';
    // импорт всего из модулять
    import * as myModule from './myModule.js'
```

Инструкции import/export не работают внутри блоков кода ({}).

Т.е. нельзя написать:

```javascript
    if (condition) {
        import {increment} from './myModule.js';
    }
```

Чтобы импортировать что-либо в зависимости от условий существует выражение import(module). Выражение import(module) загружает модуль и возвращает промис, результатом которого становится объект модуля, содержащий все его экспорты, или ошибку, если импорт не удался.

Пример правильного импорта по условию:

```javascript
    if (condition) {
        import('./myModule.js')
            .then(({increment}) => {
                increment();
            });
    }
```

Или с помощью синтаксиса async/await (данный код нужно выполнять внутри async функции):

```javascript
    if (condition) {
        const {increment} = await import('./myModule.js');
        increment();
    }
```