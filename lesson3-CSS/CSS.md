# CSS. Стилизация веб-страницы

CSS (cascading style sheets) или каскадные таблицы стилей - язык таблиц стилей. Он позволяет описать визуальное отображение страницы гораздо более гибко и сильно, нежели ограниченный набор тегов HTML.

CSS представляет собой набор правил, по которым будет отображена страница. Правила применяются по селектору (это может быть сам тег, класс, идентификатор, любой другой атрибут HTML-тега).

Для начала рассмотрим примеры подключения CSS к HTML-документу.

Самый простой способ подключения - **инлайн-стили**. Они задаются внутри атрибута style любого из тегов:

```html
<body>
	<main style="border: 5px solid red; padding: 20px;"></main>
</body>
```

Такой подход не позволяет применить одинаковые стили к нескольким элементам на странице, что ведёт к дублированию кода и сложности его сопровождения.

Применить одинаковые стили к нескольким элементам получится, если описать их внутри тега style или в отдельном файле. Рассмотрим оба способа:

1. **Тег `<style>`**. Стили так же можно задавать в самом HTML-документе, без подключения файлов:


    ```html
    <html lang="en">
    <head>
    	<style>
    		.block {
    			margin-left: 12px;
    		}
    	</style>
    </head>
    <body>
    	<main class="block"></main>
    </body>
    ```

    Но, таким образом нельзя будет использовать один и тот же набор стилей для нескольких страниц. А это иногда требуется, например, если на всех страницах используется одна библиотека компонентов.

2. **Подключение через тег `<link>`** внутри `<head>`. Именно так мы подключали стили в предыдущем блоке. Здесь мы подключаем файл main.css, который лежит в папке styles относительно файла HTML-документа:

    ```html
    <html lang="en">
    <head>
    	<link rel="stylesheet" href="styles/main.css">
    </head>
    <body>
    </body>
    ```


Так как же писать стили? На самом деле - очень просто. Рассмотрим небольшой пример:

![./src/Untitled.png](./src/Untitled.png)

В данном случае ко всем заголовкам `<h1>` на всех страницах применится свойство `font-family` со значением Arial и свойство color со значением grey.

### Виды селекторов

1. Универсальный селектор. Соответствует любому элементу. Применяется ко всем элементам на странице.

```css
* {
	font-family: Comic Sans MS;
}
```

2. Селектор элементов. Применяются к элементу документа (тегу).

```css
span {
	font-family: Comic Sans MS;
}
```

3. Селектор класса. Позволяет задавать стили для всех элементов с атрибутом class. Класс никак не связан с тегом.

```css
.class-name {
	font-family: Comic Sans MS;
}
```

Классы задаются в HTML, внутри атрибута style. Дать элементу несколько классов тоже можно. Достаточно указать их через пробел:

```html
<span class="first-class second-class my-class">Text</span>
```

4. Селектор идентификатора. Выборка осуществляется по атрибуту id. Такой атрибут согласно спецификации должен быть уникален в рамках страницы.

```css
#my_element {
	font-family: Comic Sans MS;
}
```

```html
<span id="my_element">Text</span>
```

5. Селекторы потомков. Применяют стили к элементам, расположенным внутри контейнера.

```css
ul li {
	font-family: Comic Sans MS;
}
```

Стили будут применены ко всем вложенным li в каждый ul. Уровень вложенности не важен.

6. Селектор прямых потомков. Описанные выше стили будут применяться ко всем элементам с классом .my-class внутри каждого `<span>`. Чтобы применить стили только к прямым потомкам (дочерним узлам), используют символ >

```css
ul > li {
	font-family: Comic Sans MS;
}
```

Звучит запутано, правда? Рассмотрим небольшой пример. Давайте посмотрим, как это выглядит в браузере.

```html
<ul class="main-list">
  <li>Пункт 1</li>
  <li>Пункт 2</li>
  <li>Пункт 3
    <ul class="sub-list">
      <li>Пункт 3.1</li>
      <li>Пункт 3.2</li>
      <li>Пункт 3.3</li>
    </ul>
  </li>
</ul>

<style>
  .main-list > li {
    border: 3px solid tomato;
    margin: 5px;
  }

  .main-list li {
    color: plum;
  }
</style>
```

![./src/Untitled%201.png](./src/Untitled%201.png)

Как видно из скриншота, стили со цветом были применены ко всем `<li>` внутри элемента с классом `.main-list`, а граница и внешние отступы только к прямым потомкам.

7. Селекторы "соседей".

```css
/* Выберет один p, что следует сразу за h1 */
h1 + p {
  text-decoration: underline;
}

/* Выберет все p, что находятся на одном уровне c
   h1 идущие сразу после него */
h1 ~ p {
  font-size: 20px;
  color: tomato;
}
```

```html
<div>
  <p>Параграф перед заголовком</p>
  <h1>Заголовок</h1>
  <p>Параграф 1</p>
  <p>Параграф 2</p>
  <p>Параграф 3</p>
</div>
```

Вот как это будет выглядеть в браузере:

![./src/Untitled%202.png](./src/Untitled%202.png)

### Основные правила CSS

1. Отображение (свойство display)
1. Позиционирование (свойства position, right, left, top, bottom)
1. Размеры (width и heigth)
1. Внешние (margin) и внутренние (padding) отступы
1. Стилизация текста (font-size, font-weight, color, font-size, letter-spacing, line-height, text-align)
1. Стилизация границ (свойства семейства border)
1. Стилизация фона (свойства семейства background)

Со значениями свойств вы можете ознакомиться в любом справочнике, например [MDN](https://developer.mozilla.org/ru/)

### Основные единицы измерения
В CSS существует большое количество способов указать размеры чего-либо. Ниже приведены те единицы измерения, которые используются чаще всего.

#### Абсолютные единицы длины
Абсолютные единицы длины не привязаны к чему-либо и всегда имеют одинаковый размер.

- `px` – пиксели. Используются постоянно, например, для управления размером шрифта или управления высотой элемента.

#### Относительные единицы длины
Относительные единицы длины позволяют указать размер относительно других величин. С помощью них можно добиться автоматического масштабирования страницы.

- `em` – размер относительно шрифта родительского элемента. `1em` = `font-size` родителя;
- `rem` – размер относительно шрифта корневого элемента. `1rem` = `font-size` корня (обычно `<html>`);
- `vw` – процент от ширины окна просмотра. `1vw` = 1% ширины окна;
- `vh` – проценты от высоты окна просмотра. `1vh` = 1% высоты окна.

> Более полный список единиц измерения можно найти на [MDN](https://developer.mozilla.org/ru/docs/Learn/CSS/Building_blocks/Values_and_units)

### Псевдоклассы и псевдоэлементы

**Псевдоклассы** — это классы, фактически не прикрепленные к HTML-тегам. Они позволяют применить CSS-правила к элементам при совершении события или подчиняющимся определенному правилу.

Псевдоклассов довольно много, рассмотрим самые распространенные. С полным списком вы можете ознакомиться в документации на MDN.

- `:link` — не посещенная ссылка;
- `:visited` — посещенная ссылка;
- `:hover` — любой элемент, по которому проводят курсором мыши;
- `:focus` — интерактивный элемент, к которому перешли с помощью клавиатуры или активировали посредством мыши;

Рассмотрим пример

```html
<a href="vk.com">Просто ссылка</a>
<a href="ok.ru">Посещенная ссылка</a>
<a href="#">На эту ссылку навели мышь</a>
<input type="text">
<input type="text" value=":focus">

<style>
  a {
    display: block;
    margin-bottom: 10px;
    text-decoration: none;
    color: black;
  }

	/* Ссылка, на которую навели мышь */
  a:hover {
    text-decoration: underline;
  }

	/* Посещённая ссылка */
  a:visited {
    color: gray;
  }

  input {
    display: block;
    margin-bottom: 10px;
    height: 30px;
    border-radius: 5px;
  }

	/* Поле ввода, на котором установлен фокус */
  input:focus {
    outline: 4px solid plum;
  }
</style>
```

![./src/Untitled%203.png](./src/Untitled%203.png)

**Псевдоэлементы** - это части документа, которые не являются частью документа. Они недоступны из js. Обычно их используют для дополнительной стилизации, чтобы не засорять вёрстку.

- `:before` — вставляет генерируемое содержимое перед элементом;
- `:after` — добавляет генерируемое содержимое после элемента.

Для :after и :before необходимо задавать свойство content, иначе они не будут отображены. Значение может быть пустым.

Пример их использования можно посмотреть [тут](https://codepen.io/andrew_starwind/pen/LYVadjw?editors=1100).

### Cпецифичность селекторов

У каждого селектора в CSS есть свой вес или специфичность. Её принято обозначать набором из 4 цифр. Применятся стили из тех правил, что имеют наибольший вес в самом левом разряде.

Справа налево (от самого слабого к самому сильному):

1. Селектор элемента div
2. Селектор класса .class
3. Селектор идентификатора #id
4. Правила в атрибуте class

![Untitled](./src/Untitled%204.png)

Какие стили будут в конечном итоге зависит от цифры в наивысшем разряде. Если значения в высшем разряде одинаковые, то сравниваются низшие. А если они одинаковые, то применяются те стили, что были подключены последними.

![Untitled](./src/Untitled%205.png)

`!important` - ключевое слово. Такие стили переопределят любые другие, кроме следующих стилей с `!important`.  Ключевое слово удобно использовать во время дебага, чтобы подсветить границы всех элементов, например. Использовать его в конечном продукте мы не рекомендуем.

```css
* {
  border: 1px solid red !important;
}
```

Чтобы избежать ситуаций, в который придётся опираться на специфичность или (тьфу-тьфу-тьфу) использовать `!important` мы рекомендуем использовать соглашения по именованию. В компании Тензор мы используем [БЭМ](https://ru.bem.info/methodology/quick-start/).

### Наследование и каскад

**Наследование** заключается в том, что элементы наследуют свойства своего родителя. Наследуются только свойства, относящие к текстовому содержимому страницы.

Узнать какие свойства наследуются, а какие нет можно посмотреть в документации.

Рассмотрим на примере и зададим наследуемые свойства на элементе body.

```css
body {
	color: aquablue;
	font-family: Arial, sans-serif;
}

main {
	border: 1px solid black;

}

header {
	padding: 0 5px;
}
```

Мы так же можем заставить элемент наследовать то или иное свойство у родителя с помощью ключевого слова `inherit`. Предположим, что мы хотим, чтобы все дочерние элементы `header` наследовали `padding`.

```css
main > * {
	padding: inherit;
}
```

Под **каскадом** понимается система применения разных CSS-правил к элементам документа. Правила каскадирования определяют какой стиль в конечном итоге будет применен к элементу. Существует три возможных источника CSS-правил.

### **Источники CSS-правил (в порядке возрастания приоритетности):**

- Агент пользователя (user-agent) — это правила, заданные по умолчанию для операционной системы и браузера, в котором открывается документ. Эти правила имеют наименьший приоритет и применяются по умолчанию ко всем элементам;
- Авторские правила (правила, которые пишем мы);
- Пользовательские правила (правила, которые может добавить читатель к нашим стилям, например, с помощью расширений `AdBlock` или `Stylish`);
- Авторские правила c `!important`;
- Пользовательские правила `!important`.

### **Правила каскадирования**

- Найти все правила, содержащие селектор, сопоставляемый с данным элементом;
- Провести сортировку согласно приоритетности источника объявлений;
- Провести сортировку согласно специфичности селекторов;
- Провести сортировку всех объявлений в соответствии с очередностью расположения в таблице стилей (между двумя селекторами с одинаковой специфичностью приоритет отдается тому, который идет позже).

Пример каскада:

```html
<button class="button">Применить</button>
<button class="button button_type_cancel">Отмена</button>

<style>
  .button {
	  margin: 16px;
	  padding: 16px;
	  text-align: center;
	  border-radius: 4px;
	  background-color: #eee;
	  color: #444;
	  box-shadow: 0 0 4px #444;
	  width: 100px;
	}

	.button_type_cancel {
	  color: red;
	  box-shadow: 0 0 4px red;
	}
</style>
```

![./src/Untitled%206.png](./src/Untitled%206.png)

Как видно из примера, для второй кнопки применились стили из класса `.button_type_cancel`. Пересекающиеся правила были переопределены теми, что написаны ниже.

Здесь важно отметить, что *порядок классов в html документе не влияет на то, в каком порядке они будут применяться*.

Дополнительные материалы:

- [Селекторы](https://developer.mozilla.org/ru/docs/Web/CSS/CSS_Selectors)
- [Псевдоклассы](https://developer.mozilla.org/ru/docs/Web/CSS/Pseudo-classes)
- [http://htmlbook.ru/samcss/nasledovanie](http://htmlbook.ru/samcss/nasledovanie)
- [http://htmlbook.ru/samcss/kaskadirovanie](http://htmlbook.ru/samcss/kaskadirovanie)
- [Свойство position](https://learn.javascript.ru/position)
- [Свойство display](https://learn.javascript.ru/display)